(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),u=n(13),r=n.n(u),o=n(14),c=n(2),i=function(e){return l.a.createElement("button",{onClick:e.handleRemove},"Poista")},m=function(e){return l.a.createElement("p",null,e.person.name," ",l.a.createElement("br",null),e.person.number," ",l.a.createElement("br",null),l.a.createElement(i,{handleRemove:function(){return e.handleRemove(e.person.id)}}))},s=function(e){var t=e.haku,n=e.persons;return""!==t&&(n=e.persons.filter(function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())})),n.map(function(t){return l.a.createElement(m,{key:t.id,person:t,handleRemove:e.handleRemove})})},d=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:e.addPerson},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Nimi:"),l.a.createElement("td",null,l.a.createElement("input",{value:e.newName,onChange:e.handleNameInput}))),l.a.createElement("tr",null,l.a.createElement("td",null,"Puhelin:"),l.a.createElement("td",null,l.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberInput}))),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")),l.a.createElement("td",null))))),l.a.createElement("button",{onClick:e.handleUpdate},"Vaihda numero"))},f=function(e){return l.a.createElement("p",null,"Haku: ",l.a.createElement("input",{value:e.newHaku,onChange:e.handleHakuInput}))},p=n(3),h=n.n(p),E="/api/persons",b=function(){return h.a.get(E)},v=function(e){return h.a.post(E,e)},w=function(e,t){return h.a.put("".concat(E,"/").concat(e),t).then(function(e){return e.data})},g=function(e){return h.a.delete("".concat(E,"/").concat(e)).then(function(e){return e.data})},k=function(e){var t=e.viesti,n=e.tyyppi;return null===t?null:l.a.createElement("div",{id:"overlay"},l.a.createElement("div",{className:n},t))},j=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],r=Object(a.useState)("Nimi"),i=Object(c.a)(r,2),m=i[0],p=i[1],h=Object(a.useState)("Puhelinnumero"),E=Object(c.a)(h,2),j=E[0],y=E[1],N=Object(a.useState)(""),O=Object(c.a)(N,2),P=O[0],C=O[1],I=Object(a.useState)(null),S=Object(c.a)(I,2),H=S[0],R=S[1],T=Object(a.useState)(null),L=Object(c.a)(T,2),J=L[0],U=L[1];Object(a.useEffect)(function(){console.log("effect"),b().then(function(e){console.log("promise fullfilled"),u(e.data)})},[]);return l.a.createElement("div",null,l.a.createElement("h1",null,"Puhelinluettelo"),l.a.createElement(k,{viesti:H,tyyppi:"palaute"}),l.a.createElement(k,{viesti:J,tyyppi:"virhe"}),l.a.createElement("div",null,l.a.createElement(f,{newHaku:P,handleHakuInput:function(e){C(e.target.value)}})),l.a.createElement("h2",null,"Lis\xe4\xe4 uusi henkil\xf6 luetteloon"),l.a.createElement("div",null,l.a.createElement(d,{addPerson:function(e){e.preventDefault();var t=m;v({name:m,number:j}).then(function(e){console.log(e),u(n.concat(e.data)),R("".concat(t," lis\xe4ttiin puhelinluetteloon.")),setTimeout(function(){R(null)},5e3)}).catch(function(e){U(e.response.data.error),setTimeout(function(){U(null)},5e3)}),p("Nimi"),y("Puhelinnumero")},newName:m,handleNameInput:function(e){p(e.target.value)},newNumber:j,handleNumberInput:function(e){y(e.target.value)},handleUpdate:function(){try{var e=n.find(function(e){return e.name===m}),t=Object(o.a)({},e,{number:j});w(e.id,t).then(function(t){u(n.map(function(n){return n.id!==e.id?n:t})),R("Henkil\xf6n ".concat(m," puhelinnumero vaihdettiin.")),p("Nimi"),y("Puhelinnumero"),setTimeout(function(){R(null)},5e3)}).catch(function(t){U(t.response.data.error),setTimeout(function(){U(null)},5e3),console.log("poistettu",e.id)})}catch(a){}console.log("Mit\xe4 tapahtui?")}})),l.a.createElement("h2",null,"Numerot"),l.a.createElement("div",null,l.a.createElement(s,{haku:P,persons:n,handleRemove:function(e){console.log("id: ".concat(e)),window.confirm("Poistetaanko yhteystieto?")&&g(e).then(function(t){u(n.filter(function(t){return t.id!==e})),R("Poisto onnistui."),setTimeout(function(){R(null)},5e3)}).catch(function(e){U(e.response.data.error),setTimeout(function(){U(null)},5e3)})}})))};n(38);r.a.render(l.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b87e4b48.chunk.js.map